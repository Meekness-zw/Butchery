(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7161:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(5155),s=r(2115),d=r(6766),n=r(3464);function l(){let[e,t]=(0,s.useState)(!1),[r,l]=(0,s.useState)({username:"",password:""}),[o,i]=(0,s.useState)(""),[c,m]=(0,s.useState)([]),[u,p]=(0,s.useState)({name:"",description:"",price:"",quantity:"",image:null}),[h,x]=(0,s.useState)(!1),[g,b]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[w,j]=(0,s.useState)(null),[v,N]=(0,s.useState)(!1),C=(0,s.useRef)(null);(0,s.useEffect)(()=>{"true"===localStorage.getItem("adminLoggedIn")&&t(!0)},[]),(0,s.useEffect)(()=>{e&&q()},[e]);let q=()=>{n.A.get("https://butchery-1.onrender.com/api/products/").then(e=>m(e.data))},D=e=>{let{name:t,value:r}=e.target;p(e=>({...e,[t]:r}))},S=async e=>{e.preventDefault(),x(!0),y("");try{let e=new FormData;e.append("name",u.name),e.append("description",u.description),e.append("price",u.price),e.append("quantity",u.quantity),u.image&&e.append("image",u.image),await n.A.post("https://butchery-1.onrender.com/api/products/",e,{headers:{"Content-Type":"multipart/form-data"}}),p({name:"",description:"",price:"",quantity:"",image:null}),C.current&&(C.current.value=""),b("Product added successfully!"),q(),setTimeout(()=>b(""),3e3),window.scrollTo({top:0,behavior:"smooth"})}catch(t){let e="Error adding product. Please try again.";t.response&&t.response.data&&("string"==typeof t.response.data?e=t.response.data:"object"==typeof t.response.data&&(e=Object.values(t.response.data).flat().join(" "))),y(e),setTimeout(()=>y(""),4e3)}finally{x(!1)}},k=async e=>{confirm("Are you sure you want to delete this product?")&&(await n.A.delete("https://butchery-1.onrender.com/api/products/".concat(e,"/")),q(),b("Product deleted."),setTimeout(()=>b(""),2e3))},A=async e=>{if(e.preventDefault(),!w)return;x(!0);let t=new FormData;t.append("name",w.name),t.append("description",w.description),t.append("price",w.price),t.append("quantity",w.quantity.toString()),await n.A.put("https://butchery-1.onrender.com/api/products/".concat(w.id,"/"),t,{headers:{"Content-Type":"multipart/form-data"}}),N(!1),j(null),q(),x(!1),b("Product updated successfully!"),setTimeout(()=>b(""),3e3)},P=e=>{if(!w)return;let{name:t,value:r}=e.target;j({...w,[t]:r})};return e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-gradient-to-r from-red-900 to-red-700 text-white shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-2xl font-extrabold tracking-tight",children:[(0,a.jsx)("span",{role:"img","aria-label":"butcher",children:"\uD83D\uDD2A"})," Admin Dashboard"]}),(0,a.jsx)("button",{onClick:()=>{t(!1),localStorage.removeItem("adminLoggedIn")},className:"bg-white text-red-900 px-4 py-2 rounded-full font-semibold hover:bg-gray-100 transition",children:"Logout"})]})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:[g&&(0,a.jsx)("div",{className:"bg-green-100 border border-green-300 text-green-900 p-4 rounded-lg mb-6 shadow animate-fade-in",children:(0,a.jsx)("span",{className:"font-semibold",children:g})}),f&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-300 text-red-900 p-4 rounded-lg mb-6 shadow animate-fade-in",children:(0,a.jsx)("span",{className:"font-semibold",children:f})}),(0,a.jsxs)("form",{className:"bg-white p-6 rounded-2xl shadow-md mb-10 space-y-3 border border-gray-200",onSubmit:S,children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2 text-gray-800",children:"Add New Product"}),(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg",name:"name",placeholder:"Name",value:u.name,onChange:D}),(0,a.jsx)("textarea",{className:"w-full border p-3 rounded-lg",name:"description",placeholder:"Description",value:u.description,onChange:D}),(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg",name:"price",placeholder:"Price",type:"number",min:"0",step:"0.01",value:u.price,onChange:D}),(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg",name:"quantity",placeholder:"Quantity",type:"number",min:"0",value:u.quantity,onChange:D}),(0,a.jsx)("input",{ref:C,className:"w-full border p-3 rounded-lg",name:"image",type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&p(t=>({...t,image:e.target.files[0]}))}}),(0,a.jsx)("button",{className:"bg-gradient-to-r from-red-700 to-red-500 text-white px-6 py-3 rounded-full font-bold w-full shadow hover:from-red-800 hover:to-red-600 transition mt-2",type:"submit",disabled:h,children:h?"Adding...":"Add Product"})]}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Product List"}),(0,a.jsx)("ul",{className:"space-y-6",children:c.map(e=>(0,a.jsxs)("li",{className:"bg-white border border-gray-200 rounded-2xl p-6 flex flex-col md:flex-row items-center gap-6 shadow-md hover:shadow-lg transition-shadow",children:[e.image&&(0,a.jsx)(d.default,{src:e.image,alt:e.name,width:128,height:128,className:"w-32 h-32 object-cover rounded-xl border border-gray-200 shadow-sm"}),(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("div",{className:"font-bold text-xl text-red-900 mb-1",children:e.name}),(0,a.jsx)("div",{className:"text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"text-red-800 font-semibold text-lg mb-1",children:["$",e.price]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["Stock: ",e.quantity]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"bg-gradient-to-r from-blue-700 to-blue-500 text-white px-4 py-2 rounded-full font-semibold shadow hover:from-blue-800 hover:to-blue-600 transition",onClick:()=>{j(e),N(!0)},children:"Edit"}),(0,a.jsx)("button",{className:"bg-gradient-to-r from-red-700 to-red-500 text-white px-4 py-2 rounded-full font-semibold shadow hover:from-red-800 hover:to-red-600 transition",onClick:()=>k(e.id),children:"Delete"})]})]},e.id))})]}),v&&w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Edit Product"}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-3",children:[(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg",name:"name",placeholder:"Name",value:w.name,onChange:P}),(0,a.jsx)("textarea",{className:"w-full border p-3 rounded-lg",name:"description",placeholder:"Description",value:w.description,onChange:P}),(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg",name:"price",placeholder:"Price",type:"number",min:"0",step:"0.01",value:w.price,onChange:P}),(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg",name:"quantity",placeholder:"Quantity",type:"number",min:"0",value:w.quantity,onChange:P}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-green-700 to-green-500 text-white px-4 py-2 rounded-full font-semibold shadow hover:from-green-800 hover:to-green-600 transition",disabled:h,children:h?"Updating...":"Update"}),(0,a.jsx)("button",{type:"button",className:"flex-1 bg-gray-500 text-white px-4 py-2 rounded-full font-semibold shadow hover:bg-gray-600 transition",onClick:()=>N(!1),children:"Cancel"})]})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-extrabold text-red-900 tracking-tight flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{role:"img","aria-label":"butcher",children:"\uD83D\uDD2A"})," Admin Login"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Access the butchery management system"})]}),o&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-300 text-red-900 p-3 rounded-lg mb-4",children:o}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"admin"===r.username&&"butchery123"===r.password?(t(!0),i(""),localStorage.setItem("adminLoggedIn","true")):i("Invalid credentials")},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",type:"text",value:r.username,onChange:e=>l({...r,username:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)("input",{required:!0,className:"w-full border p-3 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",type:"password",value:r.password,onChange:e=>l({...r,password:e.target.value})})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-red-700 to-red-500 text-white px-6 py-3 rounded-full font-bold shadow hover:from-red-800 hover:to-red-600 transition",children:"Login"})]}),(0,a.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:[(0,a.jsx)("p",{children:"Demo credentials:"}),(0,a.jsx)("p",{children:"Username: admin"}),(0,a.jsx)("p",{children:"Password: butchery123"})]})]})})}},9083:(e,t,r)=>{Promise.resolve().then(r.bind(r,7161))}},e=>{e.O(0,[209,441,964,358],()=>e(e.s=9083)),_N_E=e.O()}]);